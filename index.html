<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SEICTECH System Production</title>
    <link rel="icon" type="image/png" href="../images/icon-seictech.png">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/imask"></script>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div id="loading-overlay">
        <img src="images/icon-seictech.png" alt="Loading..." class="loading-icon">
    </div>

    <script>
        // Redireciona para o login se não estiver autenticado
        if (sessionStorage.getItem('isLoggedIn') !== 'true') {
            window.location.href = 'auth/login.html';
        }
    </script>

    <div class="dashboard-container hidden" id="dashboard-container">
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <img src="images/logo-branco.png" alt="SEICTECH Logo" class="sidebar-logo">
                <i class="bi bi-shield-check sidebar-icon-collapsed"></i>
            </div>
            <ul class="sidebar-menu">
                <li class="active" data-section="overview"><i class="bi bi-graph-up-arrow"></i> <span>Visão Geral</span></li>
                <li data-section="products"><i class="bi bi-box-seam"></i> <span>Cadastro de Produtos</span></li>
                <li data-section="production"><i class="bi bi-gear-wide-connected"></i> <span>Controle de Produção</span></li>
                <li data-section="stock"><i class="bi bi-hdd-stack"></i> <span>Estoque</span></li>
                <li data-section="clients"><i class="bi bi-people"></i> <span>Cadastro de Clientes</span></li>
                <li data-section="pdv"><i class="bi bi-cart4"></i> <span>PDV</span></li>
                <li data-section="reports"><i class="bi bi-file-earmark-bar-graph"></i> <span>Relatórios</span></li>
                <li data-section="users"><i class="bi bi-person-badge"></i> <span>Cadastro de Usuários</span></li>
                <li data-section="permissions"><i class="bi bi-shield-lock"></i> <span>Permissões</span></li>
            </ul>
            <div class="sidebar-footer">
                <button id="collapse-btn">
                    <i class="bi bi-chevron-double-left"></i>
                </button>
            </div>
        </div>

        <!-- Conteúdo Principal com Rolagem -->
        <div class="main-content" id="main-content">
            <div class="content-header">
                <button id="menu-toggle" class="menu-toggle-btn"><i class="bi bi-list"></i></button>
                <h2 id="section-title">Visão Geral</h2>
                <div class="user-menu">
                    <button id="user-menu-toggle" class="user-menu-toggle">
                        <i class="bi bi-gear-fill"></i>
                    </button>
                    <div id="user-menu-dropdown" class="user-menu-dropdown hidden">
                        <a href="auth/meu-perfil.html"><i class="bi bi-person"></i> Meu Perfil</a>
                        <a href="#" id="logout-btn"><i class="bi bi-box-arrow-right"></i> Sair</a>
                    </div>
                </div>
            </div>

            <!-- Seção de Visão Geral -->
            <div id="overview-section">
                <!-- Cards de Resumo -->
                <div class="summary-cards">
                    <div class="summary-card">
                        <i class="bi bi-box-seam"></i>
                        <div class="summary-info">
                            <span class="summary-label">Total de Produtos</span>
                            <span class="summary-value" id="total-products-summary">0</span>
                        </div>
                    </div>
                    <div class="summary-card">
                        <i class="bi bi-people"></i>
                        <div class="summary-info">
                            <span class="summary-label">Total de Clientes</span>
                            <span class="summary-value" id="total-clients-summary">0</span>
                        </div>
                    </div>
                    <div class="summary-card">
                        <i class="bi bi-cash-coin"></i>
                        <div class="summary-info">
                            <span class="summary-label">Vendas Totais</span>
                            <span class="summary-value" id="total-sales-summary">R$ 0,00</span>
                        </div>
                    </div>
                    <div class="summary-card">
                        <i class="bi bi-person-fill"></i>
                        <div class="summary-info">
                            <span class="summary-label">Usuários</span>
                            <span class="summary-value" id="total-users-summary">0</span>
                        </div>
                    </div>
                </div>

                <!-- Gráficos -->
                <div class="charts-grid">
                    <div class="card">
                        <div class="card-header">
                            <h3>Vendas Mensais</h3>
                        </div>
                        <canvas id="salesChart"></canvas>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <h3>Status do Estoque</h3>
                        </div>
                        <canvas id="stockStatusChart"></canvas>
                    </div>
                </div>
            </div>
            
            <!-- Seção de Cadastro de Produtos -->
            <div id="products-section" class="hidden">
                <div class="card">
                    <div class="card-header">
                        <h3>Cadastrar Novo Produto</h3>
                    </div>
                    <form id="product-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="product-barcode">Código de Barras</label>
                                <input type="text" id="product-barcode" required>
                            </div>
                            <div class="form-group">
                                <label for="product-description">Descrição</label>
                                <input type="text" id="product-description" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="product-cost">Custo (R$)</label>
                                <input type="number" id="product-cost" step="0.01" min="0" required>
                            </div>
                            <div class="form-group">
                                <label for="product-price">Preço de Venda (R$)</label>
                                <input type="number" id="product-price" step="0.01" min="0" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="product-stock">Estoque Inicial</label>
                                <input type="number" id="product-stock" step="0.01" min="0" value="0" required>
                            </div>
                            <div class="form-group">
                                <label for="product-min-stock">Estoque Mínimo</label>
                                <input type="number" id="product-min-stock" step="0.01" min="0" value="0" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="product-unit">Embalagem do Produto</label>
                                <select id="product-unit" required>
                                    <option value="un">UN (Unidade)</option>
                                    <option value="kg">KG (Quilograma)</option>
                                    <option value="l">Litro</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="product-image">Imagem do Produto (Opcional)</label>
                                <input type="file" id="product-image" accept="image/*">
                                <div class="image-preview-container">
                                    <img id="product-image-preview" src="/images/preview-image.png" class="image-preview" src="" alt="Prévia da imagem">
                                    <button type="button" id="remove-image" class="remove-image">X</button>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Tipo de Produto</label>
                            <div class="radio-group">
                                <div class="radio-option">
                                    <input type="radio" id="product-type-finished" name="product-type" value="finished" checked>
                                    <label for="product-type-finished">Produto Acabado</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" id="product-type-intermediate" name="product-type" value="intermediate">
                                    <label for="product-type-intermediate">Produto Intermediário</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" id="product-type-supply" name="product-type" value="supply">
                                    <label for="product-type-supply">Insumo</label>
                                </div>
                            </div>
                        </div>
                        <button type="submit" class="btn"><i class="bi bi-check-circle"></i> Salvar Produto</button>
                    </form>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h4>Consultar Produtos</h4>
                    </div>
                    <div class="search-container">
                        <div class="search-options radio-group">
                            <div class="radio-option">
                                <input type="radio" id="search-product-barcode" name="product-search-type" value="barcode" checked>
                                <label for="search-product-barcode">Código de Barras</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="search-product-description" name="product-search-type" value="description">
                                <label for="search-product-description">Descrição</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="search-product-all" name="product-search-type" value="all">
                                <label for="search-product-all">Todos</label>
                            </div>
                        </div>
                        <div class="search-input-group form-row" style="margin-top: 1rem;">
                            <input type="text" id="product-search-input" placeholder="Digite para buscar...">
                            <button type="button" class="btn" id="search-product-consulta-btn"><i class="bi bi-search"></i> Buscar</button>
                            <button type="button" class="btn btn-secondary" id="clear-product-search"><i class="bi bi-eraser"></i> Limpar</button>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h3>Produtos Cadastrados</h3>
                    </div>
                    <div class="table-responsive">
                        <table class="table" id="products-table">
                            <thead>
                                <tr>
                                    <th>Código</th>
                                    <th>Descrição</th>
                                    <th>Tipo</th>
                                    <th>Embalagem</th>
                                    <th>Custo</th>
                                    <th>Preço</th>
                                    <th>Estoque</th>
                                    <th class="actions-cell">Ações</th>
                                </tr>
                            </thead>
                            <tbody id="products-table-body">
                                <!-- Produtos serão inseridos aqui via JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <!-- Seção de Controle de Produção -->
            <div id="production-section" class="hidden">
                <div class="card">
                    <div class="card-header">
                        <h3>Nova Receita de Produção</h3>
                    </div>
                    <form id="production-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="finished-product">Produto Acabado</label>
                                <select id="finished-product" required>
                                    <option value="">Selecione um produto</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="batch-size">Tamanho do Lote (Unidades)</label>
                                <input type="number" id="batch-size" min="1" value="1" required>
                            </div>
                        </div>
                        
                        <div class="card-header">
                            <h4>Ingredientes da Receita</h4>
                            <button type="button" class="btn" id="add-ingredient"><i class="bi bi-plus-circle"></i> Adicionar Ingrediente</button>
                        </div>
                        
                        <div id="ingredients-container" style="display: flex; flex-direction: column; gap: 1rem; margin-top: 1rem;">
                            <!-- Ingredientes serão adicionados aqui -->
                        </div>
                        
                        <div class="action-buttons" style="margin-top: 2rem;">
                            <button type="submit" class="btn">Calcular Custo</button>
                            <button type="button" class="btn btn-success" id="save-production" disabled><i class="bi bi-save"></i> Salvar Produção</button>
                        </div>
                    </form>
                    
                    <div id="production-results" class="production-results hidden">
                        <h4>Resultados da Produção</h4>
                        <div class="results-grid">
                            <div class="result-item">
                                <div class="label">Custo Total</div>
                                <div class="value" id="total-cost">R$ 0,00</div>
                            </div>
                            <div class="result-item">
                                <div class="label">Custo por Unidade</div>
                                <div class="value" id="unit-cost">R$ 0,00</div>
                            </div>
                            <div class="result-item">
                                <div class="label">Rendimento</div>
                                <div class="value" id="yield">0 unidades</div>
                            </div>
                            <div class="result-item">
                                <div class="label">Margem de Lucro</div>
                                <div class="value" id="profit-margin">0%</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h3>Histórico de Produção</h3>
                    </div>
                    <div id="production-history">
                        <!-- Histórico de produção será inserido aqui -->
                    </div>
                </div>
            </div>
            
            <!-- Seção de Estoque -->
            <div id="stock-section" class="hidden">
                <div class="card">
                    <div class="card-header">
                        <h3>Controle de Estoque</h3>
                    </div>
                    <div class="table-responsive">
                        <table class="table" id="stock-table">
                            <thead>
                                <tr>
                                    <th>Código</th>
                                    <th>Descrição</th>
                                    <th>Tipo</th>
                                    <th>Embalagem</th>
                                    <th>Estoque Atual</th>
                                    <th>Estoque Mínimo</th>
                                    <th>Status</th>
                                    <th class="actions-cell">Ações</th>
                                </tr>
                            </thead>
                            <tbody id="stock-table-body">
                                <!-- Estoque será inserido aqui via JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h3>Movimentações de Estoque</h3>
                    </div>
                    <div id="stock-movements">
                        <!-- Movimentações de estoque serão inseridas aqui -->
                    </div>
                </div>
            </div>

            <!-- Seção de Cadastro de Clientes -->
            <div id="clients-section" class="hidden">
                <div class="card">
                    <div class="card-header">
                        <h3>Cadastrar Novo Cliente</h3>
                    </div>
                    <form id="client-form">
                        <div class="form-group">
                            <label>Tipo de Cliente</label>
                            <div class="radio-group">
                                <div class="radio-option">
                                    <input type="radio" id="client-type-physical" name="client-type" value="physical" checked>
                                    <label for="client-type-physical">Pessoa Física</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" id="client-type-legal" name="client-type" value="legal">
                                    <label for="client-type-legal">Pessoa Jurídica</label>
                                </div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="client-name">Nome Completo</label>
                                <input type="text" id="client-name" required>
                            </div>
                            <div class="form-group" id="cpf-field">
                                <label for="client-cpf">CPF</label>
                                <input type="text" id="client-cpf">
                            </div>
                            <div class="form-group hidden" id="cnpj-field">
                                <label for="client-cnpj">CNPJ</label>
                                <input type="text" id="client-cnpj">
                            </div>
                            <div class="form-group hidden" id="company-name-field">
                                <label for="client-company-name">Razão Social</label>
                                <input type="text" id="client-company-name">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="client-email">E-mail</label>
                                <input type="email" id="client-email">
                            </div>
                            <div class="form-group">
                                <label for="client-phone">Telefone</label>
                                <input type="tel" id="client-phone">
                            </div>
                             <div class="form-group">
                                <label for="client-whatsapp">WhatsApp</label>
                                <input type="tel" id="client-whatsapp">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="client-address">Endereço</label>
                            <input type="text" id="client-address">
                        </div>
                        <button type="submit" class="btn"><i class="bi bi-person-plus"></i> Salvar Cliente</button>
                    </form>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h4>Consultar Clientes</h4>
                    </div>
                    <div class="search-container">
                        <div class="search-options radio-group">
                            <div class="radio-option">
                                <input type="radio" id="search-client-name" name="client-search-type" value="name" checked>
                                <label for="search-client-name">Nome</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="search-client-cpf" name="client-search-type" value="cpf">
                                <label for="search-client-cpf">CPF</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="search-client-cnpj" name="client-search-type" value="cnpj">
                                <label for="search-client-cnpj">CNPJ</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="search-client-all" name="client-search-type" value="all">
                                <label for="search-client-all">Todos</label>
                            </div>
                        </div>
                        <div class="search-input-group form-row" style="margin-top: 1rem;">
                            <input type="text" id="client-search-input" placeholder="Digite para buscar...">
                            <button type="button" class="btn" id="search-client-btn"><i class="bi bi-search"></i> Buscar</button>
                            <button type="button" class="btn btn-secondary" id="clear-client-search"><i class="bi bi-eraser"></i> Limpar</button>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3>Clientes Cadastrados</h3>
                    </div>
                    <div class="table-responsive">
                        <table class="table" id="clients-table">
                            <thead>
                                <tr>
                                    <th>Nome</th>
                                    <th>Tipo</th>
                                    <th>Documento</th>
                                    <th>E-mail</th>
                                    <th>Telefone</th>
                                    <th>WhatsApp</th>
                                    <th class="actions-cell">Ações</th>
                                </tr>
                            </thead>
                            <tbody id="clients-table-body">
                                <!-- Clientes serão inseridos aqui -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Seção de PDV -->
            <div id="pdv-section" class="hidden">
                <div class="pdv-main">
                    <div class="card">
                        <div class="form-row">
                            <div class="form-group">
                                <label>Buscar Produto</label>
                                <input type="text" id="product-search" placeholder="Código ou descrição...">
                            </div>
                            <div class="form-group">
                                <label>Filtrar por Tipo</label>
                                <select id="product-type-filter">
                                    <option value="all">Todos os Tipos</option>
                                    <option value="finished">Produto Acabado</option>
                                    <option value="intermediate">Produto Intermediário</option>
                                    <option value="supply">Insumo</option>
                                </select>
                            </div>
                            <button type="button" id="search-product-pdv-btn" class="btn" style="align-self: end;"><i class="bi bi-search"></i></button>
                        </div>
                    </div>
                    <div class="products-grid-container">
                        <div id="products-grid">
                            <!-- Produtos para venda aqui -->
                        </div>
                    </div>
                </div>
                <div class="pdv-cart">
                    <h4><i class="bi bi-cart3"></i> Carrinho de Compras</h4>
                    <div id="cart-items">
                        <p style="text-align: center; padding: 20px; color: var(--text-secondary);">Carrinho vazio</p>
                    </div>
                    <div class="cart-summary">
                        <div class="summary-row">
                            <span>Subtotal</span>
                            <span id="cart-subtotal">R$ 0,00</span>
                        </div>
                        <div class="summary-row">
                            <span>Desconto</span>
                            <span id="cart-discount">R$ 0,00</span>
                        </div>
                        <div class="summary-row total">
                            <span>Total</span>
                            <span id="cart-total">R$ 0,00</span>
                        </div>
                    </div>
                    <div class="cart-actions">
                        <div class="form-group">
                            <label>Cliente</label>
                            <select id="sale-client"></select>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Desconto</label>
                                <input type="number" id="discount" value="0" min="0">
                            </div>
                            <div class="form-group">
                                <label>Tipo</label>
                                <div class="radio-group" style="margin-top: 0;">
                                    <input type="radio" id="discount-type-value" name="discount-type" value="value" checked> <label for="discount-type-value">R$</label>
                                    <input type="radio" id="discount-type-percent" name="discount-type" value="percent"> <label for="discount-type-percent">%</label>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Forma de Pagamento</label>
                            <select id="payment-method">
                                <option value="cash">Dinheiro</option>
                                <option value="pix">Pix</option>
                                <option value="debit">Cartão de Débito</option>
                                <option value="credit">Cartão de Crédito</option>
                            </select>
                        </div>
                        <button id="finalize-sale" class="btn btn-success" style="width: 100%;"><i class="bi bi-check-all"></i> Finalizar Venda</button>
                        <button id="clear-cart" class="btn btn-danger" style="width: 100%; margin-top: 0.5rem;"><i class="bi bi-trash"></i> Limpar Carrinho</button>
                    </div>
                </div>
            </div>

            <!-- Seção de Relatórios -->
            <div id="reports-section" class="hidden">
                <div class="tabs">
                    <button class="tab-btn active" data-tab="sales-report-tab">Relatório de Vendas</button>
                    <button class="tab-btn" data-tab="production-report-tab">Relatório de Produção</button>
                    <button class="tab-btn" data-tab="client-sales-report-tab">Vendas por Cliente</button>
                </div>

                <div id="sales-report-tab" class="tab-content active">
                    <div class="card">
                        <div class="card-header">
                            <h3>Relatório de Vendas</h3>
                        </div>
                        <!-- Conteúdo do relatório de vendas -->
                    </div>
                </div>

                <div id="production-report-tab" class="tab-content">
                    <div class="card">
                        <div class="card-header">
                            <h3>Relatório de Produção</h3>
                        </div>
                        <!-- Conteúdo do relatório de produção -->
                    </div>
                </div>

                <div id="client-sales-report-tab" class="tab-content">
                    <div class="card">
                        <div class="card-header">
                            <h3>Relatório de Vendas por Cliente</h3>
                        </div>
                        <!-- Conteúdo do relatório de vendas por cliente -->
                    </div>
                </div>
            </div>

            <!-- Seção de Cadastro de Usuários -->
            <div id="users-section" class="hidden">
                <div class="card">
                    <div class="card-header">
                        <h3>Cadastrar Novo Usuário</h3>
                        <button id="toggle-user-form-btn" class="btn"><i class="bi bi-plus-lg"></i> Novo Usuário</button>
                    </div>
                    <div id="user-form-container" class="hidden">
                        <form id="user-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="user-nome">Nome</label>
                                    <input type="text" id="user-nome" required>
                                </div>
                                <div class="form-group">
                                    <label for="user-sobrenome">Sobrenome</label>
                                    <input type="text" id="user-sobrenome" required>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="user-email">E-mail</label>
                                    <input type="email" id="user-email" required>
                                </div>
                                <div class="form-group">
                                    <label for="user-cpf">CPF</label>
                                    <input type="text" id="user-cpf" required>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="user-password">Senha</label>
                                    <input type="password" id="user-password" required>
                                </div>
                                <div class="form-group">
                                    <label for="user-role">Função</label>
                                    <select id="user-role" required>
                                        <!-- As opções de role serão carregadas dinamicamente -->
                                    </select>
                                </div>
                            </div>
                            <button type="submit" class="btn"><i class="bi bi-person-plus"></i> Salvar Usuário</button>
                        </form>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h4>Consultar Usuários</h4>
                    </div>
                    <div class="search-container">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="user-search-input">Filtrar por Nome ou E-mail</label>
                                <input type="text" id="user-search-input" placeholder="Digite nome ou e-mail...">
                            </div>
                            <div class="form-group">
                                <label for="user-role-filter">Filtrar por Função</label>
                                <select id="user-role-filter">
                                    <option value="">Todas as Funções</option>
                                    <!-- As opções de role serão carregadas dinamicamente -->
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="user-date-filter">Filtrar por Data de Cadastro</label>
                                <input type="date" id="user-date-filter">
                            </div>
                        </div>
                        <div class="action-buttons" style="margin-top: 1rem; justify-content: flex-start;">
                            <button type="button" class="btn" id="search-user-btn"><i class="bi bi-search"></i> Aplicar Filtros</button>
                            <button type="button" class="btn btn-secondary" id="clear-user-search"><i class="bi bi-eraser"></i> Limpar Filtros</button>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3>Usuários Cadastrados</h3>
                    </div>
                    <div class="table-responsive">
                        <table class="table" id="users-table">
                            <thead>
                                <tr>
                                    <th>Nome</th>
                                    <th>E-mail</th>
                                    <th>Função</th>
                                    <th>Data Cadastro</th>
                                    <th class="actions-cell">Ações</th>
                                </tr>
                            </thead>
                            <tbody id="users-table-body">
                                <!-- Usuários serão inseridos aqui -->
                            </tbody>
                        </table>
                    </div>
                </div>

            </div>

            <!-- Seção de Permissões -->
            <div id="permissions-section" class="hidden">
                <div class="card">
                    <div class="card-header">
                        <h3>Gerenciar Funções e Permissões</h3>
                        <button id="add-role-btn" class="btn"><i class="bi bi-plus-lg"></i> Nova Função</button>
                    </div>
                    <div id="roles-container">
                        <!-- Funções e permissões serão carregadas aqui -->
                    </div>
                </div>
            </div>

        </div>
    </div>

    <!-- Cupom (para impressão) -->
    <div id="receipt" class="hidden">
        <!-- Conteúdo do cupom aqui -->
    </div>

    <script src="js/script.js"></script>

    <!-- ==== Templates para Notificações e Modais ==== -->

    <!-- Container para onde as notificações serão injetadas -->
    <div id="notification-container"></div>

    <!-- Estrutura do Modal de Confirmação (inicialmente oculto) -->
    <div id="confirmation-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">Confirmar Exclusão</h3>
                <button id="modal-close-btn" class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <p id="modal-message">Você tem certeza que deseja excluir este item?</p>
                <p id="modal-item-name"></p>
            </div>
            <div class="modal-footer">
                <button id="modal-cancel-btn" class="btn btn-secondary">Cancelar</button>
                <button id="modal-confirm-btn" class="btn btn-danger">Excluir</button>
            </div>
        </div>
    </div>

    <!-- Modal para Editar Permissão de Usuário -->
    <div id="edit-user-role-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="edit-user-role-modal-title">Editar Permissão de Usuário</h3>
                <button id="edit-user-role-modal-close-btn" class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <p>Alterar a permissão do usuário: <strong id="edit-user-role-modal-user-name"></strong></p>
                <div class="form-group">
                    <label for="edit-user-role-select">Nova Permissão</label>
                    <select id="edit-user-role-select">
                        <!-- As opções de role serão carregadas dinamicamente -->
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button id="edit-user-role-modal-cancel-btn" class="btn btn-secondary">Cancelar</button>
                <button id="edit-user-role-modal-confirm-btn" class="btn btn-primary">Salvar</button>
            </div>
        </div>
    </div>

</body>
</html>